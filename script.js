const data = [
  {
    resumenCuentas: [
      { cuenta: "ignacio aguilar (150*****327)", monto: "2960 bs" },
      { cuenta: "pacha sunset (201*****307)", monto: "29.310 bs" },
      { cuenta: "mama (150*****327)", monto: "7200 bs" }
    ],
    totalCuentas: "39.470 bs",

    mesas: [
      { mesa: "cumpleañero", cantidad: 22 },
      { mesa: "pacha", cantidad: 0 },
      { mesa: "cascabel", cantidad: 6 },
      { mesa: "banx", cantidad: 7 },
      { mesa: "jager", cantidad: 2 },
      { mesa: "pachamama", cantidad: 9 }
    ],

    porcentajeAreas: [
      { area: "Pacha", porcentaje: "60.00%" },
      { area: "Parrales", porcentaje: "94.44%" },
      { area: "Lounge", porcentaje: "81.82%" },
      { area: "Cholet", porcentaje: "83.33%" },
      { area: "Camel", porcentaje: "33.33%" },
      { area: "Extras", porcentaje: "0.00%" },
      { area: "Vip", porcentaje: "50.00%" }
    ],

    combosEstrella: [
      { combo: "cumpleañero", cantidad: 22 },
      { combo: "pachamama", cantidad: 9 },
      { combo: "banx", cantidad: 7 },
      { combo: "cascabel", cantidad: 6 },
      { combo: "jager", cantidad: 2 }
    ],
    totalCombos: 46,

    gananciasMama: [
      { mesa: "pacha 1", acuerdo: "500", destino: "ignacio aguilar" },
      { mesa: "parrales 17", acuerdo: "500", destino: "pacha sunset" }
    ],
    totalGananciasMama: "1000 bs",

    depositosMama: [
      { mesa: "pacha 4", acuerdo: "500", destino: "mama" },
      { mesa: "parrales 7", acuerdo: "500", destino: "mama" },
      { mesa: "lounge 2", acuerdo: "500", destino: "mama" },
      { mesa: "lounge 7", acuerdo: "500", destino: "mama" },
      { mesa: "lounge 10", acuerdo: "500", destino: "mama" },
      { mesa: "cholet 1", acuerdo: "500", destino: "mama" },
      { mesa: "cholet 3", acuerdo: "500", destino: "mama" }
    ],
    totalDepositosMama: "3500 bs",

    bebidas: [
      { bebida: "parrales", cantidad: 43 },
      { bebida: "FDC5", cantidad: 24 },
      { bebida: "fernet buhero", cantidad: 3 },
      { bebida: "jager", cantidad: 2 },
      { bebida: "viuda descalza", cantidad: 1 },
      { bebida: "gin republica", cantidad: 1 }
    ],
    totalBebidas: 74,

    ingresosNetos: {
      ingresos: "39,470 Bs",
      inversion: "6,503.63 Bs",
      gananciasNetas: "32,966.37 Bs"
    }
  },

  // --- Segundo bloque ---
  {
    resumenCuentas: [
      { cuenta: "pacha sunset (201*****307)", monto: "43.470 bs" },
      { cuenta: "natalia rodriguez (150*****327)", monto: "1000 bs" },
      { cuenta: "ignacio aguilar (150*****327)", monto: "1680 bs" }
    ],
    totalCuentas: "46.150 bs",

    mesas: [
      { mesa: "cumpleañero", cantidad: 32 },
      { mesa: "pacha", cantidad: 1 },
      { mesa: "cascabel", cantidad: 7 },
      { mesa: "banx", cantidad: 5 },
      { mesa: "jager", cantidad: 4 },
      { mesa: "pachamama", cantidad: 4 }
    ],

    porcentajeAreas: [
      { area: "Pacha", porcentaje: "80.00%" },
      { area: "Parrales", porcentaje: "88.89%" },
      { area: "Lounge", porcentaje: "90.91%" },
      { area: "Cholet", porcentaje: "91.67%" },
      { area: "Camel", porcentaje: "100.00%" },
      { area: "Extras", porcentaje: "0.00%" },
      { area: "Vip", porcentaje: "66.67%" }
    ],

    combosEstrella: [
      { combo: "cumpleañero", cantidad: 32 },
      { combo: "cascabel", cantidad: 7 },
      { combo: "banx", cantidad: 5 },
      { combo: "pachamama", cantidad: 4 },
      { combo: "jager", cantidad: 4 },
      { combo: "pacha", cantidad: 1 }
    ],
    totalCombos: 53,

    gananciasMama: [
      { mesa: "parrales 8", acuerdo: "500", destino: "pacha sunset" },
      { mesa: "parrales 12", acuerdo: "500", destino: "pacha sunset" },
      { mesa: "parrales 15", acuerdo: "500", destino: "pacha sunset" }
    ],
    totalGananciasMama: "1500 bs",

    depositosMama: [
      { mesa: "pacha 6", acuerdo: "500", destino: "natalia rodriguez" }
    ],
    totalDepositosMama: "500 bs",

    bebidas: [
      { bebida: "parrales", cantidad: 50 },
      { bebida: "FDC5", cantidad: 32 },
      { bebida: "fernet buhero", cantidad: 5 },
      { bebida: "jager", cantidad: 3 },
      { bebida: "vodka", cantidad: 3 },
      { bebida: "viuda descalza", cantidad: 1 }
    ],
    totalBebidas: 94,

    ingresosNetos: {
      ingresos: "46,150 Bs",
      inversion: "9,078.94 Bs",
      gananciasNetas: "37,071.06 Bs"
    }
  },

  // --- Tercer bloque ---
  {
    resumenCuentas: [
      { cuenta: "pacha sunset (201*****307)", monto: "32.520 bs" },
      { cuenta: "mama (150*****327)", monto: "1800 bs" },
      { cuenta: "fernando sejas (N/A)", monto: "980 bs" },
      { cuenta: "natalia rodriguez (150*****327)", monto: "2100 bs" }
    ],
    totalCuentas: "37.400 bs",

    mesas: [
      { mesa: "cumpleañero", cantidad: 22 },
      { mesa: "pacha", cantidad: 0 },
      { mesa: "cascabel", cantidad: 5 },
      { mesa: "banx", cantidad: 11 },
      { mesa: "jager", cantidad: 4 },
      { mesa: "pachamama", cantidad: 4 }
    ],

    porcentajeAreas: [
      { area: "Pacha", porcentaje: "60.00%" },
      { area: "Parrales", porcentaje: "100.00%" },
      { area: "Lounge", porcentaje: "81.82%" },
      { area: "Cholet", porcentaje: "91.67%" },
      { area: "Camel", porcentaje: "33.33%" },
      { area: "Extras", porcentaje: "0.00%" },
      { area: "Vip", porcentaje: "16.67%" }
    ],

    combosEstrella: [
      { combo: "cumpleañero", cantidad: 22 },
      { combo: "banx", cantidad: 11 },
      { combo: "cascabel", cantidad: 5 },
      { combo: "jager", cantidad: 4 },
      { combo: "pachamama", cantidad: 4 }
    ],
    totalCombos: 46,

    gananciasMama: [
      { mesa: "pacha 4", acuerdo: "500", destino: "pacha sunset" }
    ],
    totalGananciasMama: "500 bs",

    depositosMama: [
      { mesa: "pacha 5", acuerdo: "500", destino: "mama" },
      { mesa: "cholet 9", acuerdo: "500", destino: "natalia rodriguez" },
      { mesa: "cholet 11", acuerdo: "500", destino: "natalia rodriguez" }
    ],
    totalDepositosMama: "1500 bs",

    bebidas: [
      { bebida: "parrales", cantidad: 42 },
      { bebida: "FDC5", cantidad: 18 },
      { bebida: "fernet buhero", cantidad: 4 },
      { bebida: "jager", cantidad: 3 },
      { bebida: "viuda descalza", cantidad: 2 },
      { bebida: "gin la republica", cantidad: 2 }
    ],
    totalBebidas: 71,

    ingresosNetos: {
      ingresos: "37,400 Bs",
      inversion: "6,786.28 Bs",
      gananciasNetas: "30,613.72 Bs"
    }
  },
  {
  resumenCuentas: [
    { cuenta: "ignacio aguilar (150*****327)", monto: "4900 bs" },
    { cuenta: "pacha sunset (201*****307)", monto: "45.730 bs" },
    { cuenta: "mama (150*****327)", monto: "2700 bs" }
  ],
  totalCuentas: "53.330 bs",

  mesas: [
    { mesa: "cumpleañero", cantidad: 30 },
    { mesa: "pacha", cantidad: 0 },
    { mesa: "cascabel", cantidad: 16 },
    { mesa: "banx", cantidad: 9 },
    { mesa: "jager", cantidad: 2 },
    { mesa: "pachamama", cantidad: 5 }
  ],

  porcentajeAreas: [
    { area: "Pacha", porcentaje: "90.00%" },
    { area: "Parrales", porcentaje: "100.00%" },
    { area: "Lounge", porcentaje: "100.00%" },
    { area: "Cholet", porcentaje: "100.00%" },
    { area: "Camel", porcentaje: "100.00%" },
    { area: "Extras", porcentaje: "60.00%" },
    { area: "Vip", porcentaje: "50.00%" }
  ],

  combosEstrella: [
    { combo: "cumpleañero", cantidad: 30 },
    { combo: "cascabel", cantidad: 16 },
    { combo: "banx", cantidad: 9 },
    { combo: "pachamama", cantidad: 5 },
    { combo: "jager", cantidad: 2 }
  ],
  totalCombos: 62,

  gananciasMama: [
    { mesa: "lounge 2", acuerdo: "500", destino: "pacha sunset" },
    { mesa: "lounge 3", acuerdo: "500", destino: "pacha sunset" },
    { mesa: "extras 6", acuerdo: "500", destino: "pacha sunset" }
  ],
  totalGananciasMama: "1500 bs",

  depositosMama: [
    { mesa: "lounge 1", acuerdo: "500", destino: "mama" },
    { mesa: "Vip 3", acuerdo: "500", destino: "mama" }
  ],
  totalDepositosMama: "1000 bs",

  bebidas: [
    { bebida: "parrales", cantidad: 61 },
    { bebida: "FDC5", cantidad: 35 },
    { bebida: "gin republica", cantidad: 4 },
    { bebida: "vodka", cantidad: 3 },
    { bebida: "fernet buhero", cantidad: 2 },
    { bebida: "viuda descalza", cantidad: 2 },
    { bebida: "jager", cantidad: 2 }
  ],
  totalBebidas: 109,

  ingresosNetos: {
    ingresos: "53,330 Bs",
    inversion: "10,311.88 Bs",
    gananciasNetas: "43,018.12 Bs"
  }
}
];

function createTable(headers, rows) {
  let html = "<div class='table-responsive'>"; // contenedor para scroll
  html += "<table>";
  html += "<thead><tr>";
  headers.forEach(h => {
    html += `<th>${h}</th>`;
  });
  html += "</tr></thead><tbody>";
  rows.forEach(row => {
    html += "<tr>";
    for (const key in row) {
      html += `<td>${row[key]}</td>`;
    }
    html += "</tr>";
  });
  html += "</tbody></table>";
  html += "</div>";
  return html;
}

function formatResumenCuentas(obj) {
  const cuentasConTotal = [...obj.resumenCuentas, { cuenta: "<strong>Total</strong>", monto: `<strong>${obj.totalCuentas}</strong>` }];
  return `<strong>RESUMEN DE CUENTAS</strong>` + createTable(
    ["Cuenta", "Monto Depositado (bs)"],
    cuentasConTotal.map(item => ({ Cuenta: item.cuenta, "Monto Depositado (bs)": item.monto }))
  );
}    

function formatMesas(obj) {
  return `<strong>Mesas</strong>` + createTable(
    ["Mesa", "Cantidad"],
    obj.mesas.map(m => ({ Mesa: m.mesa, Cantidad: m.cantidad }))
  );
}

function formatPorcentajeAreas(obj) {
  return `<strong>Porcentaje de áreas Vendidas</strong>` + createTable(
    ["Área", "Porcentaje"],
    obj.porcentajeAreas.map(p => ({ Área: p.area, Porcentaje: p.porcentaje }))
  );
}

function formatCombosEstrella(obj) {
  const combosConTotal = [
    ...obj.combosEstrella.map(c => ({ Combo: c.combo, Cantidad: c.cantidad })),
    { Combo: "<strong>Total</strong>", Cantidad: `<strong>${obj.totalCombos}</strong>` }
  ];

  return `<strong>Combos estrella</strong>` + createTable(
    ["Combo", "Cantidad"],
    combosConTotal
  );
}

function formatGananciasMama(obj) {
  const datosConTotal = [
    ...obj.gananciasMama.map(g => ({
      Mesa: g.mesa,
      "Acuerdo PachaMama": g.acuerdo,
      "Cuenta de destino": g.destino
    })),
    {
      Mesa: "<strong>Total depositar a MAMA</strong>",
      "Acuerdo PachaMama": `<strong>${obj.totalGananciasMama}</strong>`,
      "Cuenta de destino": ""
    }
  ];

  return `<strong>GANANCIAS MAMA</strong>` + createTable(
    ["Mesa", "Acuerdo PachaMama", "Cuenta de destino"],
    datosConTotal
  );
}

function formatDepositosMama(obj) {
  const datosConTotal = [
    ...obj.depositosMama.map(d => ({
      Mesa: d.mesa,
      Acuerdo: d.acuerdo,
      "Cuenta de destino": d.destino
    })),
    {
      Mesa: "<strong>Total que deben depositar a PACHA</strong>",
      Acuerdo: `<strong>${obj.totalDepositosMama}</strong>`,
      "Cuenta de destino": ""
    }
  ];

  return `<strong>DEPÓSITOS QUE MAMA DEBE REALIZAR A PACHA</strong>` + createTable(
    ["Mesa", "Acuerdo", "Cuenta de destino"],
    datosConTotal
  );
}

function formatBebidas(obj) {
  const datosConTotal = [
    ...obj.bebidas.map(b => ({
      Bebida: b.bebida,
      Cantidad: b.cantidad
    })),
    {
      Bebida: "<strong>Total</strong>",
      Cantidad: `<strong>${obj.totalBebidas}</strong>`
    }
  ];

  return `<strong>BEBIDAS</strong>` + createTable(
    ["Bebida", "Cantidad"],
    datosConTotal
  );
}

function formatIngresosNetos(obj) {
  return `<strong>TOTAL DE INGRESOS NETOS POR VENTAS DE MESAS</strong>` +
    `<table border='1' style='border-collapse: collapse; width: 100%;'>` +
    `<tbody>` +
    `<tr><td style='padding:6px;'>Ingresos</td><td style='padding:6px;'>${obj.ingresosNetos.ingresos}</td></tr>` +
    `<tr><td style='padding:6px;'>Inversión</td><td style='padding:6px;'>${obj.ingresosNetos.inversion}</td></tr>` +
    `<tr><td style='padding:6px;'>Ganancias Neta</td><td style='padding:6px;'>${obj.ingresosNetos.gananciasNetas}</td></tr>` +
    `</tbody></table>`;
}

function generateContent(index) {
  if (index < 0 || index >= data.length) return "";
  const obj = data[index];
  let html = "";
  html += formatResumenCuentas(obj);
  html += formatMesas(obj);
  html += formatPorcentajeAreas(obj);
  html += formatCombosEstrella(obj);
  html += formatGananciasMama(obj);
  html += formatDepositosMama(obj);
  html += formatBebidas(obj);
  html += formatIngresosNetos(obj);
  return html;
}

function openModal(index) {
  document.getElementById('modal-text').innerHTML = generateContent(index);
  document.getElementById('modal').style.display = 'flex';
}

function closeModal() {
  document.getElementById('modal').style.display = 'none';
}
window.onload = () => {
  closeModal(); // fuerza a cerrar cualquier modal visible por error
};
